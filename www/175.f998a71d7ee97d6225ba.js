(self.webpackChunkplatzi_music=self.webpackChunkplatzi_music||[]).push([[175],{175:(n,t,i)=>{"use strict";i.r(t),i.d(t,{HomePageModule:()=>S});var o=i(1116),e=i(6498),s=i(1462),r=i(4517),c=i(4762),a=i(9568),l=i(7368);let u=(()=>{class n{constructor(){}fetchAPI(){return fetch("https://platzi-music-api.herokuapp.com/browse/new-releases").then(n=>n.json())}getTopTracks(n){return fetch("https://platzi-music-api.herokuapp.com/artists/"+n+"/top-tracks?country=CO").then(n=>n.json())}getAlbumTracks(n){return fetch("https://platzi-music-api.herokuapp.com/albums/"+n+"/tracks?country=CO").then(n=>n.json())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function g(n,t){if(1&n){const n=l.EpF();l.TgZ(0,"ion-slide"),l.TgZ(1,"ion-avatar",3),l.NdJ("click",function(){const t=l.CHM(n).$implicit;return l.oxw(2).getSongs(t)}),l._UZ(2,"img",13),l.TgZ(3,"span"),l._uU(4),l.qZA(),l.qZA(),l.qZA()}if(2&n){const n=t.$implicit;l.xp6(2),l.Q6J("src",n.images[0].url,l.LSH),l.xp6(2),l.Oqu(n.name)}}function p(n,t){if(1&n&&(l.TgZ(0,"ion-slides",11),l.YNc(1,g,5,2,"ion-slide",12),l.qZA()),2&n){const n=l.oxw();l.Q6J("options",n.homeSlidesOptions),l.xp6(1),l.Q6J("ngForOf",n.artistas)}}function m(n,t){if(1&n){const n=l.EpF();l.TgZ(0,"ion-slide"),l.TgZ(1,"ion-avatar",14),l.NdJ("click",function(){const t=l.CHM(n).$implicit;return l.oxw(2).showSongsByAlbum(t)}),l._UZ(2,"img",13),l.TgZ(3,"span"),l._uU(4),l.qZA(),l.qZA(),l.qZA()}if(2&n){const n=t.$implicit;l.xp6(2),l.Q6J("src",n.images[0].url,l.LSH),l.xp6(2),l.Oqu(n.name)}}function h(n,t){if(1&n&&(l.TgZ(0,"ion-slides",11),l.YNc(1,m,5,2,"ion-slide",12),l.qZA()),2&n){const n=l.oxw();l.Q6J("options",n.homeSlidesOptions),l.xp6(1),l.Q6J("ngForOf",n.albums)}}function d(n,t){if(1&n&&(l.TgZ(0,"ion-slide"),l.TgZ(1,"ion-avatar",15),l._UZ(2,"img",13),l.TgZ(3,"span"),l._uU(4),l.qZA(),l.qZA(),l.qZA()),2&n){const n=t.$implicit;l.xp6(2),l.Q6J("src",n.images[0].url,l.LSH),l.xp6(2),l.Oqu(n.name)}}function Z(n,t){if(1&n&&(l.TgZ(0,"ion-slides",11),l.YNc(1,d,5,2,"ion-slide",12),l.qZA()),2&n){const n=l.oxw();l.Q6J("options",n.homeSlidesOptions),l.xp6(1),l.Q6J("ngForOf",n.SONGS)}}function f(n,t){if(1&n&&(l.TgZ(0,"ion-row"),l.TgZ(1,"ion-col",16),l._uU(2),l.qZA(),l.TgZ(3,"ion-col",17),l._uU(4),l.qZA(),l.qZA()),2&n){const n=l.oxw();l.xp6(2),l.Oqu(n.parseTime(n.currentSong.currentTime)||"00:00"),l.xp6(2),l.Oqu(n.parseTime(n.currentSong.duration)||"00:00")}}function T(n,t){if(1&n){const n=l.EpF();l.TgZ(0,"ion-icon",18),l.NdJ("click",function(){return l.CHM(n),l.oxw().play()}),l.qZA()}}function A(n,t){if(1&n){const n=l.EpF();l.TgZ(0,"ion-icon",19),l.NdJ("click",function(){return l.CHM(n),l.oxw().pause()}),l.qZA()}}const q=[{path:"",component:(()=>{class n{constructor(n,t,i){this.router=n,this.musicService=t,this.modalController=i,this.homeSlidesOptions={initialSlide:2,slidesPerView:4,centeredSlides:!0,speed:400},this.artistas=[],this.SONGS=[],this.albums=[],this.song={preview_url:"",playing:!1,name:""}}ngOnInit(){this.artistInitial()}enterLogIn(){this.router.navigateByUrl("/login")}artistInitial(){this.musicService.fetchAPI().then(n=>{this.SONGS=n.albums.items.filter(n=>"single"===n.album_type),this.albums=n.albums.items.filter(n=>"album"===n.album_type)})}printOut(){console.log(this.artistas),console.log(this.SONGS),console.log(this.albums)}getSongs(n){return(0,c.mG)(this,void 0,void 0,function*(){const t=yield this.musicService.getTopTracks(n.id),i=yield this.modalController.create({component:a.$,componentProps:{songs:t.tracks,artist:n.name}});return i.onDidDismiss().then(n=>{this.song=n.data}),yield i.present()})}play(){this.currentSong=new Audio(this.song.preview_url),this.currentSong.play(),this.currentSong.addEventListener("timeupdate",()=>{this.newTime=this.currentSong.currentTime/this.currentSong.duration}),this.song.playing=!0}pause(){this.currentSong.pause(),this.song.playing=!1}parseTime(n){if(n){const t=parseInt(n.toString().split(".")[0],10);let i=Math.floor(t/60).toString();1===i.length&&(i="0"+i);let o=(t%60).toString();return 1===o.length&&(o="0"+o),i+":"+o}return"00.00"}showSongsByAlbum(n){return(0,c.mG)(this,void 0,void 0,function*(){const t=yield this.musicService.getAlbumTracks(n.id),i=yield this.modalController.create({component:a.$,componentProps:{songs:t.items,artist_or_album:n.name}});return i.onDidDismiss().then(n=>{console.log(n),this.song=n.data}),yield i.present()})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(r.F0),l.Y36(u),l.Y36(e.IN))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home"]],decls:31,vars:9,consts:[[3,"translucent"],["slot","end"],[3,"options",4,"ngIf"],[3,"click"],[4,"ngIf"],[3,"value"],["size","1"],["name","heart"],["size","10"],["name","play",3,"click",4,"ngIf"],["name","pause",3,"click",4,"ngIf"],[3,"options"],[4,"ngFor","ngForOf"],[3,"src"],[1,"square-avatar",3,"click"],[1,"square-avatar"],[1,"ion-text-start"],[1,"ion-text-end"],["name","play",3,"click"],["name","pause",3,"click"]],template:function(n,t){1&n&&(l.TgZ(0,"ion-header",0),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-menu-button"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(4,"ion-content"),l.TgZ(5,"h3"),l._uU(6,"Artist"),l.qZA(),l.YNc(7,p,2,2,"ion-slides",2),l.TgZ(8,"h3"),l._uU(9,"Albums"),l.qZA(),l.YNc(10,h,2,2,"ion-slides",2),l.TgZ(11,"h3"),l._uU(12,"Songs"),l.qZA(),l.YNc(13,Z,2,2,"ion-slides",2),l.TgZ(14,"ion-buttons"),l.TgZ(15,"ion-button",3),l.NdJ("click",function(){return t.printOut()}),l._uU(16," test "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"ion-footer"),l.TgZ(18,"ion-grid"),l.YNc(19,f,5,2,"ion-row",4),l.qZA(),l._UZ(20,"ion-progress-bar",5),l.TgZ(21,"ion-grid"),l.TgZ(22,"ion-row"),l.TgZ(23,"ion-col",6),l._UZ(24,"ion-icon",7),l.qZA(),l.TgZ(25,"ion-col",8),l.TgZ(26,"ion-text"),l._uU(27),l.qZA(),l.qZA(),l.TgZ(28,"ion-col",6),l.YNc(29,T,1,0,"ion-icon",9),l.YNc(30,A,1,0,"ion-icon",10),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&n&&(l.Q6J("translucent",!0),l.xp6(7),l.Q6J("ngIf",t.artistas.length),l.xp6(3),l.Q6J("ngIf",t.albums.length),l.xp6(3),l.Q6J("ngIf",t.SONGS.length),l.xp6(6),l.Q6J("ngIf",t.currentSong),l.xp6(1),l.Q6J("value",t.newTime),l.xp6(7),l.Oqu(t.song.name||"Music not played"),l.xp6(2),l.Q6J("ngIf",!t.song.playing),l.xp6(1),l.Q6J("ngIf",t.song.playing))},directives:[e.Gu,e.sr,e.Sm,e.fG,e.W2,o.O5,e.YG,e.fr,e.jY,e.X7,e.Nd,e.wI,e.gu,e.yW,e.Hr,o.sg,e.A$,e.BJ],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-slides[_ngcontent-%COMP%]{background-color:#8c8c8c;height:100%;max-width:800px}.swiper-slide[_ngcontent-%COMP%]{display:block;margin-bottom:64px;background-color:#8c8c8c}ion-avatar[_ngcontent-%COMP%]{height:120px;width:90%}ion-avatar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px}.square-avatar[_ngcontent-%COMP%]{--border-radius:0}"]}),n})()}];let x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[r.Bz.forChild(q)],r.Bz]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[o.ez,s.u5,e.Pc,x]]}),n})()}}]);